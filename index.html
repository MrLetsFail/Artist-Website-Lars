<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Laʁs</title>
    <link rel="stylesheet" href="style.css">
    <style>
        .block {
            transition: transform 0.5s ease-in-out;
        }
    </style>
</head>
<body>

    <div class="block cursor" draggable="false" style="height: 100%; width: 100%; background-color: transparent;"></div>

    <div class="block box" draggable="true" style="top: 50px; left: 100px;">
        <h2>Laʁs - Artist Website</h2>
        <p>Ich bin Lars, Grafikdesigner in Ausbildung. Mein Fokus liegt auf sinnstiftenden Projekten. Ich arbeite kreativ und strukturiert – von der ersten Idee bis zur Umsetzung. Ob visuelles Design oder konzeptuelles Denken: Ich versuche, gestalterisches Gespür mit unternehmerischem Blick zu verbinden. Am liebsten arbeite ich mit Menschen, die etwas bewegen wollen – sozial, kulturell, politisch oder ökologisch.</p>
    </div>

    <div class="block box" draggable="true" style="top: 480px; left: 360px;">
        <h3>About me:</h3>
        <ul>
            <li><img src="Assets/Bild.png" alt=""></li>
            <li>Ich bin 24 Jahre alt</li>
            <li>Design Student an der Mediauniversity in Berlin</li>
            <li>Artist (Music, Film, Fotografie)</li>
        </ul>
    </div>

    <div class="block box" draggable="true" style="top: 210px; left: 100px;">
        <h3>Musik:</h3>
        <ul>
            <li><a href="https://open.spotify.com/album/1Dj61MCdvQNq921uvujc2v?si=_FkStoMLRTijcN-SCz1c3A">Augen auf und durch Mixtape</a></li>
            <li><a href="https://www.youtube.com/watch?v=dXS1Vcv6U-8">Es wird wieder Firsch</a></li>
            <li><a href="https://www.youtube.com/watch?v=QzyJ_0bHCHY">Leben läuft (feat.)</a></li>
            <li><a href="https://www.youtube.com/watch?v=S30JYxZbTnE&list=OLAK5uy_lm2TPeWZn5AtCl2YHT1ZGfUZShUDM0Ko8">Wie bisher (feat.)</a></li>
        </ul>
    </div>

    <div class="block box" draggable="true" style="top: 420px; left: 670px;">
        <h3>Sonstige Projekte:</h3>
        <ul>
            <li><a href="https://youtu.be/Vr6uZ7TBBnw">Dexter Intro Reconstruction</a></li>
            <li><a href="https://www.youtube.com/watch?v=fgpDVtZdC4U">life.mp4</a></li>
            <li><a href="https://youtube.com/shorts/MCXfXad805g?si=PMZ2k3avO38syr_H">Motiondesign Loop</a></li>
            <li><a href="https://www.youtube.com/watch?v=EKa0ukdN2P8">Campus WG</a></li
            <li><a href:"https://www.youtube.com/watch?v=wZPYAOzWaY4">Lovely Day Kurzfilm</a></li>
        </ul>
    </div>

    <div class="block box" draggable="true" style="top: 210px; left: 880px;">
        <h3>Contact / Kanäle:</h3>
        <ul>
            <li><a href="mailto:lars.kaster@gmx.de">Email</a></li>
            <li><a href="https://www.instagram.com/psychedelicpandemic/?hl=de">Instagram</a></li>
            <li><a href="https://www.youtube.com/@larsmanstanding">YouTube</a></li>
        </ul>
    </div>


    <div class="block box" draggable="true" style="top: 50px; left: 1000px;">
        <h3><a href="datenschutz.html">Datenschutz</a></h3>
    </div>
    <div class="block box" draggable="true" style="top: 310px; left: 1170px;">
        <h3>Fotogalerie:</h3>
        <div class="gallery">
            <button class="prev">&#10094;</button>
            <img src="Assets/Bild2.png" class="active" alt="Bild 1">
            <img src="Assets/Bild3.png" alt="Bild 2">
            <img src="Assets/Bild4.png" alt="Bild 3">
            <img src="Assets/Bild5.png" alt="Bild 4">
            <img src="Assets/Bild6.jpg" alt="Bild 5">
            <img src="Assets/Bild7.jpg" alt="Bild 6">
            <img src="Assets/Bild8.jpg" alt="Bild 7">
            <img src="Assets/Bild9.jpeg" alt="Bild 8">
            <button class="next">&#10095;</button>
        </div>
    </div>
    
    <script>
    window.onload = function () {
            const boxes = Array.from(document.querySelectorAll('.box'));
            const placed = [];
    
            boxes.forEach(box => {
                let left = parseInt(box.style.left || 0);
                let top = parseInt(box.style.top || 0);
                const width = box.offsetWidth;
                const height = box.offsetHeight;
    
                function isOverlapping(x, y) {
                    return placed.some(other => {
                        return !(
                            x + width < other.x ||
                            x > other.x + other.width ||
                            y + height < other.y ||
                            y > other.y + other.height
                        );
                    });
                }
    
                while (isOverlapping(left, top)) {
                    top += 20;
                    if (top + height > window.innerHeight) {
                        top = 0;
                        left += 20;
                    }
                }
    
                box.style.left = `${left}px`;
                box.style.top = `${top}px`;
                placed.push({ x: left, y: top, width, height });
            });
        };
    </script>

    <script>
        const blocks = document.querySelectorAll('.block');
        let currentDraggedElement = null;
        let initialX, initialY;

        blocks.forEach(block => {
            block.addEventListener('dragstart', dragStart);
            block.addEventListener('dragover', dragOver);
            block.addEventListener('drop', drop);
            block.dataset.x = block.offsetLeft;

            const lockCheckbox = block.querySelector('.lock-checkbox input');
            if (lockCheckbox) {
                lockCheckbox.addEventListener('change', () => {
                    block.classList.toggle('locked', lockCheckbox.checked);
                });
            }
        });

        document.getElementById('gravityBtn').addEventListener('click', applyGravity);

        function dragStart(e) {
            currentDraggedElement = e.target;
            e.dataTransfer.effectAllowed = 'move';
            e.dataTransfer.setData('text/plain', null);
            initialX = currentDraggedElement.offsetLeft;
            initialY = currentDraggedElement.offsetTop;
        }

        function dragOver(e) {
            e.preventDefault();
            e.dataTransfer.dropEffect = 'move';
        }

        function drop(e) {
            e.preventDefault();
            const dropX = e.clientX;
            const dropY = e.clientY;
            const boxWidth = currentDraggedElement.offsetWidth;
            const boxHeight = currentDraggedElement.offsetHeight;
        
            let newX = dropX;
            let newY = dropY;
        
            // Überprüft Kollision mit anderen Boxen
            function isColliding(x, y) {
                return Array.from(document.querySelectorAll('.box')).some(box => {
                    if (box === currentDraggedElement) return false;
                    const rect = box.getBoundingClientRect();
                    return !(
                        x + boxWidth < rect.left ||
                        x > rect.right ||
                        y + boxHeight < rect.top ||
                        y > rect.bottom
                    );
                });
            }
        
            // Solange Kollision besteht, versetze die Box nach unten
            while (isColliding(newX, newY)) {
                newY += 50; // Verschiebe in 20px Schritten nach unten
                if (newY + boxHeight > window.innerHeight) {
                    newY = 0;
                    newX += 50;
                }
            }
        
            currentDraggedElement.style.transform = 'none';
            currentDraggedElement.style.left = newX + 'px';
            currentDraggedElement.style.top = newY + 'px';
        }

        document.addEventListener("DOMContentLoaded", function () {
            const boxes = Array.from(document.querySelectorAll('.box'));
            const placed = [];
    
            boxes.forEach(box => {
                let left = parseInt(box.style.left || 0);
                let top = parseInt(box.style.top || 0);
                const width = box.offsetWidth;
                const height = box.offsetHeight;
    
                function isOverlapping(x, y) {
                    return placed.some(other => {
                        return !(
                            x + width < other.x ||
                            x > other.x + other.width ||
                            y + height < other.y ||
                            y > other.y + other.height
                        );
                    });
                }
    
                while (isOverlapping(left, top)) {
                    top += 20;
                    if (top + height > window.innerHeight) {
                        top = 0;
                        left += 20;
                    }
                }
    
                box.style.left = `${left}px`;
                box.style.top = `${top}px`;
                placed.push({ x: left, y: top, width, height });
            });
        });
</script>

</body>
</html>
